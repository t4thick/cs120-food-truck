{% extends "staff_layout.html" %}
{% block staff_content %}

<!-- Welcome Section -->
<section class="welcome-section">
    <div class="welcome-container">
        <div class="welcome-content">
            <div class="welcome-header">
                <div class="welcome-greeting">
                    <h1 class="welcome-title">Welcome Back, <span class="welcome-name">{{ user.first }}!</span></h1>
                    <p class="welcome-subtitle">It's great to have you here</p>
                </div>
                <div class="welcome-date">
                    <svg class="date-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <span>{{ now().strftime('%A, %B %d, %Y') }}</span>
                </div>
            </div>
            <div class="welcome-actions">
                <a href="{{ url_for('staff_schedule') }}" class="welcome-action-btn primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    View Schedule
                </a>
                <a href="{{ url_for('staff_management') }}" class="welcome-action-btn secondary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    Manage Staff
                </a>
            </div>
        </div>
        <div class="welcome-illustration">
            <div class="welcome-badge">
                <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
        </div>
    </div>
</section>

<section class="staff-stats">
    <div class="stat-card">
        <div class="stat-card-content">
            <span>Total Staff</span>
            <strong>{{ staff_list|length if staff_list else 0 }}</strong>
            <p>
                <span style="color: #22c55e;">↑</span>
                {% set staff_count = staff_list|length if staff_list else 0 %}
                {% if staff_count > 0 %}+{{ staff_count - 1 }} this month{% else %}0 this month{% endif %}
            </p>
        </div>
        <div class="stat-card-icon staff">
            <svg class="stat-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-card-content">
            <span>Today's Shifts</span>
            <strong>{% if next_shift and next_shift.date == now().strftime('%Y-%m-%d') %}1{% else %}0{% endif %}</strong>
            <p>
                <span style="color: #22c55e;">↑</span>
                {% if next_shift and next_shift.date == now().strftime('%Y-%m-%d') %}1 scheduled{% else %}0 completed{% endif %}
            </p>
        </div>
        <div class="stat-card-icon schedule">
            <svg class="stat-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-card-content">
            <span>Hours This Week</span>
            <strong>{{ stats.completed_shifts * 4 }}</strong>
            <p>
                <span style="color: #22c55e;">↑</span>
                Across all staff
            </p>
        </div>
        <div class="stat-card-icon hours">
            <svg class="stat-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-card-content">
            <span>Total Schedules</span>
            <strong>{{ stats.total_shifts }}</strong>
            <p>
                <span style="color: #22c55e;">↑</span>
                All time
            </p>
        </div>
        <div class="stat-card-icon dashboard">
            <svg class="stat-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="18" y1="20" x2="18" y2="10"></line>
                <line x1="12" y1="20" x2="12" y2="4"></line>
                <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
        </div>
    </div>
</section>

<section class="shift-panels">
    <div class="panel-card">
        <div class="panel-header">
            <div>
                <h2>
                    <svg style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 8px; stroke: #dc2626;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    Today's Shifts
                </h2>
            </div>
        </div>
        {% if next_shift and next_shift.date == now().strftime('%Y-%m-%d') %}
            <div class="panel-body shift-highlight">
                <p class="shift-time">{{ next_shift.time }}</p>
                <p class="shift-desc">{{ next_shift.work_time }}</p>
                <p class="shift-manager">Manager: {{ next_shift.manager }}</p>
            </div>
        {% else %}
            <div class="panel-empty">
                <svg style="width: 64px; height: 64px; margin: 0 auto 16px; display: block; color: #ddd; stroke: currentColor; fill: none;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                <p>No shifts scheduled for today</p>
            </div>
        {% endif %}
    </div>

    <div class="panel-card">
        <div class="panel-header">
            <div>
                <h2>
                    <svg style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 8px; stroke: #dc2626;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    Upcoming Shifts
                </h2>
            </div>
        </div>
        {% if upcoming_schedules %}
            <ul class="upcoming-list">
                {% for shift in upcoming_schedules %}
                    <li>
                        <div>
                            <strong>{{ shift.date }}</strong>
                            <p>{{ shift.time }} · {{ shift.work_time }}</p>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <div class="panel-empty">
                <svg style="width: 64px; height: 64px; margin: 0 auto 16px; display: block; color: #ddd; stroke: currentColor; fill: none;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <p>No upcoming shifts</p>
            </div>
        {% endif %}
    </div>
</section>

{% endblock %}

